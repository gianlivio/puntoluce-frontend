<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Punto Luce - Materiale Elettrico Online</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <style>
        /* ===== VARIABILI CSS ===== */
        :root {
            --bg-primary: white;
            --bg-gray: #f7f7f7;
            --bg-input: #ffbe00;
            --color-onaccent: #fff;
            --color-primary: #037dd3;
            --color-neutral: #525252;
            --color-accent: #ffbe00;
            --color-text-dark: #2a2a2a;
            --color-border: #ccc;
            --text-input-submit: #000;
            --border-primary: #e8e8e8;
            --shadow: 0px 5px 15px -3px rgba(0, 0, 0, 0.1);
            --radius: 5px;
            --header-bar-height: 30px;
            --header-top-height: 85px;
            --header-navigation-height: 48px;
            --header-mobile-height: 70px;
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        html {
            scroll-behavior: smooth;
            scrollbar-gutter: stable;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg-primary);
            padding-top: var(--header-mobile-height);
            font-size: 14px;
        }
        
        a { text-decoration: none; color: inherit; }
        ul { list-style: none; }
        button { background: none; border: none; cursor: pointer; font-family: inherit; }
        
        .container { max-width: 1500px; margin: 0 auto; padding: 0 10px; }
        
        .material-symbols-outlined {
            font-family: 'Material Symbols Outlined';
            font-weight: normal;
            font-style: normal;
            font-size: 24px;
            line-height: 1;
            display: inline-block;
            -webkit-font-smoothing: antialiased;
        }
        
        /* ===== HEADER ===== */
        .header {
            background-color: var(--bg-primary);
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 25;
        }
        
        .header__bar {
            display: none;
        }
        
        .header__top {
            display: grid;
            grid-template-columns: 1fr auto;
            grid-template-rows: auto auto;
            grid-template-areas: "logo buttons" "search search";
            row-gap: 8px;
            column-gap: 10px;
            padding: 8px 10px;
            align-items: center;
        }
        
        .header__logo { display: none; }
        
        .header__mobile-logo {
            display: block;
            grid-area: logo;
        }
        
        .header__mobile-logo img {
            display: block;
            max-height: 60px;
            width: auto;
        }
        
        .header__search {
            grid-area: search;
            width: 100%;
        }
        
        .header__search-form {
            display: flex;
            position: relative;
        }
        
        .header__search-box {
            width: 100%;
            padding: 8px 40px 8px 10px;
            font-size: 16px;
            border-radius: var(--radius);
            height: 38px;
            border: 1px solid var(--color-border);
        }
        
        .header__search-box:hover {
            border: 2px solid var(--color-primary);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.20);
        }
        
        .header__search-button {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            padding: 0;
        }
        
        .header__search-button span {
            font-size: 24px;
            color: #666;
        }
        
        .header__search-button:hover span {
            color: var(--color-primary);
        }
        
        .header__buttons {
            grid-area: buttons;
            display: flex;
            gap: 8px;
        }
        
        .header__account-button,
        .header__cart,
        .header__side-menu {
            padding: 4px 6px;
        }
        
        .header__account-button > .material-symbols-outlined,
        .header__cart > .material-symbols-outlined,
        .header__side-menu > .material-symbols-outlined {
            font-size: 30px;
            font-variation-settings: 'wght' 300;
        }
        
        .header__account-button:hover,
        .header__cart:hover,
        .header__side-menu:hover {
            background-color: rgba(0, 0, 0, 0.05);
            border-radius: var(--radius);
        }
        
        .header__cart {
            position: relative;
        }
        
        .header__cart-quantity {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: #ffbe00a1;
            color: black;
            font-size: 11px;
            font-weight: 700;
            padding: 2px 6px;
            border-radius: 10px;
            min-width: 18px;
            height: 18px;
            text-align: center;
        }
        
        .header__navigation {
            display: none;
        }

        
        
        /* ===== RESPONSIVE TABLET ===== */
        @media (min-width: 768px) {
            .header__top {
                grid-template-columns: 200px 1fr auto;
                grid-template-areas: "logo search buttons";
                gap: 20px;
                padding: 10px 15px;
            }
            
            .header__logo {
                display: block;
            }
            
            .header__logo img {
                max-height: 70px;
                width: auto;
            }
            
            .header__mobile-logo {
                display: none;
            }
            
            .header__account-button,
            .header__cart {
                gap: 5px;
                padding: 10px 15px;
                height: 38px;
                border-radius: var(--radius);
                border: 1px solid var(--color-border);
                display: flex;
                align-items: center;
            }
            
            .header__account-button > .material-symbols-outlined,
            .header__cart > .material-symbols-outlined {
                font-size: 24px;
            }
            
            .header__account-button:hover,
            .header__cart:hover {
                color: var(--color-primary);
                border-color: var(--color-primary);
                box-shadow: 0 2px 6px rgba(0, 0, 0, 0.20);
            }
            
            .header__side-menu {
                display: none;
            }
        }
        
        /* ===== RESPONSIVE DESKTOP ===== */
        @media (min-width: 1024px) {
            body {
                padding-top: calc(var(--header-bar-height) + var(--header-top-height) + var(--header-navigation-height));
            }
            
            .container {
                padding: 0 20px;
            }
            
            .header__bar {
                display: flex;
                align-items: center;
                background-color: var(--color-primary);
                height: var(--header-bar-height);
            }
            
            .header__bar-content {
                display: grid;
                grid-template-columns: 1fr auto 1fr;
                align-items: center;
                color: var(--color-onaccent);
                font-size: 13px;
                font-weight: 500;
                width: 100%;
            }
            
            .header__bar-promo {
                display: flex;
                align-items: center;
                gap: 8px;
                justify-self: start;
                color: #fff; text-decoration: none;
            }
            .header__bar-promo:hover { text-decoration: underline; }
            
            .header__bar-promo svg {
                width: 14px;
                height: 14px;
                fill: white;
            }
            
            .header__bar-feedaty {
                color: white;
                justify-self: center;
            }
            
            .header__bar-language {
                display: flex;
                align-items: center;
                gap: 5px;
                cursor: pointer;
                justify-self: end;
            }
            
            .header__logo img {
                max-height: 90px;
            }
            
            .header__navigation {
                display: flex;
                justify-content: space-between;
                align-items: center;
                height: var(--header-navigation-height);
            }
            
            .header__navigation-left,
            .header__navigation-right {
                display: flex;
                gap: 15px;
                align-items: center;
            }
            
            .header__navigation-item {
                position: relative;
            }
            
            .header__navigation-item > a,
            .header__navigation-item > button {
                display: flex;
                align-items: center;
                gap: 3px;
                padding: 5px 15px;
                color: var(--color-text-dark);
                font-size: 14px;
            }
            
            .header__navigation-item > a:hover,
            .header__navigation-item > button:hover {
                color: var(--color-primary);
            }
            
            .header__navigation-item--highlight > button {
                font-weight: 700;
                text-transform: uppercase;
                color: var(--color-primary);
                border: 2px solid var(--color-primary);
                border-radius: 4px;
                padding: 8px 15px;
                background: white;
            }
            
            .header__navigation-item--highlight > button:hover {
                background: var(--color-primary);
                color: white;
            }
            
            /* Menu Reparti - 2 colonne */
            #departments-menu {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                background: white;
                border: 1px solid var(--border-primary);
                border-radius: var(--radius);
                box-shadow: var(--shadow);
                z-index: 100;
                width: 800px;
                max-height: 600px;
            }
            
            .header__navigation-item--highlight:hover #departments-menu {
                display: grid;
                grid-template-columns: 300px 1fr;
            }
            
            .departments-list {
                border-right: 1px solid var(--border-primary);
                padding: 15px;
                overflow-y: auto;
                max-height: 600px;
            }
            
            .department-item {
                padding: 10px 15px;
                cursor: pointer;
                border-radius: var(--radius);
                margin-bottom: 2px;
                transition: all 0.2s;
            }
            
            .department-item:hover,
            .department-item.active {
                background: var(--bg-gray);
                color: var(--color-primary);
            }
            
            .subdepartments-list {
                padding: 15px 20px;
                overflow-y: auto;
                max-height: 600px;
                display: none;
            }
            
            .subdepartments-list.active {
                display: block;
            }
            
            .subdepartment-item {
                padding: 8px 12px;
                margin-bottom: 4px;
                border-radius: var(--radius);
                transition: all 0.2s;
            }
            
            .subdepartment-item a {
                color: var(--color-text-dark);
                display: block;
            }
            
            .subdepartment-item:hover {
                background: var(--bg-gray);
            }
            
            .subdepartment-item:hover a {
                color: var(--color-primary);
            }
            
            /* Menu Negozio - standard */
            .header__navigation-submenu {
                display: none;
                position: absolute;
                top: 100%;
                right: 0;
                background: white;
                border: 1px solid var(--border-primary);
                border-radius: var(--radius);
                padding: 15px;
                min-width: 200px;
                box-shadow: var(--shadow);
                z-index: 100;
            }
            
            .header__navigation-item:hover .header__navigation-submenu {
                display: block;
            }
            
            .header__navigation-submenu-item {
                padding: 8px 12px;
                cursor: pointer;
            }
            
            .header__navigation-submenu-item:hover {
                color: var(--color-primary);
                background: var(--bg-gray);
            }
        }
        
        /* Nascondi la label "Account" sotto 1024px (lascia solo l'icona) */
.header__account-button .material-symbols-outlined + span {
  display: none;
}

/* Da desktop in su (>=1024px) mostra di nuovo la label */
@media (min-width: 1024px) {
  .header__account-button .material-symbols-outlined + span {
    display: inline;
  }
}

        /* ===== CONTENUTO ===== */
        main {
            min-height: 70vh;
            padding: 40px 0;
        }
        
        /* ===== FOOTER ===== */
        .footer {
            background: linear-gradient(160deg, #fff 0, #f5f9ff 100%);
            border-top: 1px solid #037dd3;
            padding: 20px 10px 0;
            color: #2a2a2a;
            box-shadow: inset 0 10px 20px rgba(3, 125, 211, 0.03);
            margin-top: 10px;
            text-align: center;
        }
        
        .footer__middle-section {
            display: flex;
            flex-direction: column;
            gap: 25px;
            margin: 0 0 40px 0;
        }
        
        .footer__columns-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 100%;
        }
        
        .footer__social {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        .footer-social-link {
            display: inline-block;
            transition: transform 0.3s;
        }
        
        .footer-social-link svg {
            width: 24px;
            height: 24px;
            fill: #037dd3;
            transition: fill 0.3s;
        }
        
        .footer-social-link:hover {
            transform: scale(1.1);
        }
        
        .footer-social-link:hover svg {
            fill: #0099ff;
        }
        
        .footer__column {
            width: 100%;
            background-color: #f9fbff;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(3, 125, 211, 0.08);
            margin-bottom: 10px;
        }
        
        .footer__menu-title, 
        .footer__contact-title {
            color: #037dd3;
            font-size: 16px;
            font-weight: 600;
            margin: 0;
            cursor: pointer;
            position: relative;
            padding: 12px;
            text-align: center;
        }
        
        .footer__contact-title::after,
        .footer__menu-title::after {
            content: "▼";
            font-size: 14px;
            transition: transform 0.3s;
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .footer__contact-title.active::after,
        .footer__menu-title.active::after {
            transform: translateY(-50%) rotate(180deg);
        }
        
        .footer__column-content {
            display: none;
            padding: 10px;
        }
        
        .footer__menu-list {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .footer__menu-item a {
            color: #2a2a2a;
            text-decoration: none;
            font-size: 14px;
            transition: color 0.3s;
            display: block;
            padding: 5px 0;
        }
        
        .footer__menu-item a:hover {
            color: #037dd3;
            padding-left: 5px;
        }
        
        .footer__contact-item {
            gap: 10px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            text-align: left;
            padding: 5px 0;
        }
        
        .contact-icon {
            width: 16px;
            height: 16px;
        }
        
        .footer__contact-item a {
            color: #2a2a2a;
            text-decoration: none;
            font-size: 14px;
        }
        
        .footer__contact-item a:hover {
            color: #037dd3;
        }
        
        .footer__bottom-bar {
            padding: 10px 0;
        }
        
        .footer__bottom-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            padding: 0 10px;
        }
        
        .footer__aicel {
            order: 1;
        }
        
        .footer__legal {
            font-size: 10px;
            color: black;
            text-align: center;
            order: 2;
        }
        
        .footer__payments {
            order: 3;
        }
        
        .footer__aicel img {
            max-width: 120px;
            height: auto;
        }
        
        .footer__payment-logos {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
        }
        
        .footer__payment-logos img {
        height: 24px;      
        width: auto;
        object-fit: contain;
        display: block;
        }
        
        @media (min-width: 1024px) {
            .footer {
                padding: 10px 0;
                text-align: left;
            }
            
            .footer__middle-section {
                flex-direction: row;
                justify-content: space-between;
            }
            
            .footer__columns-container {
                flex-direction: row;
                gap: 20px;
            }
            
            .footer__column {
                flex: 1;
                padding: 0 20px;
                background-color: transparent;
                box-shadow: none;
            }
            
            .footer__menu-title, 
            .footer__contact-title {
                font-size: 18px;
                cursor: default;
                padding: 0;
                text-align: left;
            }
            
            .footer__contact-title::after,
            .footer__menu-title::after {
                display: none;
            }
            
            .footer__column-content {
                display: block;
                padding: 0;
            }
            
            .footer__social {
                justify-content: flex-start;
            }
            
            .footer__bottom-content {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
            
            .footer__aicel {
                order: 1;
                flex: 0 0 auto;
            }
            
            .footer__legal {
                order: 2;
                flex: 0 1 auto;
                max-width: 50%;
            }
            
            .footer__payments {
                order: 3;
                flex: 0 0 auto;
            }
            
            .footer__aicel img {
                max-width: 150px;
            }
        }

        /* ===== HAMBURGER MENU (mobile) ===== */
.mobile-menu { 
  position: fixed; inset: 0; z-index: 1000; display: none;
}
.mobile-menu.is-open { display: block; }
.mobile-menu__overlay { position: absolute; inset: 0; background: rgba(0,0,0,.35); }
.mobile-menu__panel {
  position: absolute;
  top: 0;
  right: 0; /* apre da destra */
  height: 100%;
  width: min(88vw, 360px);
  background: #fff;
  box-shadow: var(--shadow);
  transform: translateX(100%); /* parte fuori dallo schermo a destra */
  transition: transform .25s ease;
  display: flex;
  flex-direction: column;
  will-change: transform;
  z-index: 1; /* sopra l’overlay */
}
.mobile-menu__overlay { z-index: 0; }

.mobile-menu.is-open .mobile-menu__panel {
  transform: translateX(0);
}

.mobile-menu__header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 12px 14px; border-bottom: 1px solid var(--border-primary);
}
.mobile-menu__header h2 { font-size: 18px; font-weight: 700; color: var(--color-text-dark); }
.mobile-menu__close { padding: 6px; border-radius: var(--radius); }
.mobile-menu__close:hover { background: var(--bg-gray); }

.mobile-menu__content { overflow: auto; padding: 8px 0 24px; }
.mobile-menu__section { padding: 8px 10px; }
.mobile-menu__section-title { font-size: 14px; color: var(--color-neutral); margin: 6px 8px 10px; }

.mobile-menu__list { display: grid; gap: 2px; }
.mobile-menu__item { list-style: none; }
.mobile-menu__button {
  width: 100%; text-align: left; padding: 12px 14px; border-radius: var(--radius);
  display: flex; align-items: center; justify-content: space-between;
  border: 1px solid var(--border-primary); background: #fff; font-size: 15px;
}
.mobile-menu__button:hover { background: var(--bg-gray); }

.mobile-menu__chevron { font-size: 22px; }
.mobile-sublist { display: none; padding-left: 8px; margin-top: 4px; }
.mobile-sublist.is-open { display: block; }
.mobile-subitem a { display: block; padding: 8px 12px; border-radius: var(--radius); font-size: 14px; }
.mobile-subitem a:hover { background: var(--bg-gray); color: var(--color-primary); }

.mobile-menu__more {
  margin: 10px 8px 0; width: calc(100% - 16px);
  display: flex; align-items: center; gap: 6px;
  padding: 10px 12px; border-radius: var(--radius);
  border: 1px dashed var(--border-primary); background: #fff; font-weight: 600;
}
.mobile-menu__more:hover { background: var(--bg-gray); }

body.no-scroll { overflow: hidden; }

/* Mostra hamburger solo <1024px (già c’è, ma ribadiamo): */
@media (min-width: 1024px) {
  #mobile-menu { display: none !important; }
}
/* ===== MENU ACCOUNT ===== */
.header__account {
    position: relative;
}

.header__account-submenu {
    position: fixed;
    right: 0;
    top: 0;
    height: 100%;
    width: 100%;
    max-width: 450px;
    transform: translateX(500px);
    visibility: hidden;
    opacity: 0;
    pointer-events: none;
    background-color: var(--bg-primary);
    z-index: 60;
    transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1), 
                visibility 0s 0.4s, 
                opacity 0.4s;
    box-shadow: -10px 0 30px rgba(0, 0, 0, 0.15);
    border-left: 2px solid var(--color-primary);
}

.header__account-submenu.design-isopen {
    visibility: visible;
    opacity: 1;
    transform: translateX(0);
    pointer-events: auto;
    transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1), 
                opacity 0.4s;
}

.header__account-arrow {
    display: none;
}

.header__account-content {
    height: 100%;
    display: flex;
    flex-direction: column;
}

.header__account-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 30px;
    background: linear-gradient(135deg, var(--color-primary) 0%, #0ea5e9 100%);
    color: var(--color-onaccent);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 4px 12px rgba(3, 125, 211, 0.15);
}

.header__account-heading {
    font-size: 18px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.header__account-close {
    cursor: pointer;
    font-variation-settings: 'wght' 300;
    font-size: 24px;
    color: var(--color-onaccent);
    border-radius: 50%;
    transition: all 0.3s ease;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.header__account-close:hover {
    background: rgba(255, 255, 255, 0.2);
}

.header__account-not-logged {
    padding: 25px 30px;
}

.header__account-new-client-text {
    font-size: 16px;
    margin-bottom: 10px;
    color: var(--color-text-dark);
}

.header__account-sign-up a {
    font-weight: 700;
    text-decoration: underline;
    color: var(--color-primary);
    font-size: 18px;
}

.header__account-sign-up a:hover {
    color: #0ea5e9;
}

.header__account-log-in {
    margin-top: 25px;
}

.header__account-log-in-button a {
    background-color: var(--color-primary);
    color: var(--color-onaccent);
    display: block;
    border-radius: var(--radius);
    padding: 12px 20px;
    font-weight: 600;
    text-align: center;
    transition: background-color 0.3s ease;
}

.header__account-log-in-button a:hover {
    background-color: #0ea5e9;
}

.header__account-remember-password {
    margin-top: 12px;
}

.header__account-remember-password a {
    display: block;
    text-align: center;
    color: var(--color-primary);
    font-size: 14px;
    font-weight: 500;
    transition: color 0.2s ease;
}

.header__account-remember-password a:hover {
    color: var(--color-accent);
    text-decoration: underline;
}

/* Desktop (≥768px) */
@media (min-width: 768px) {
    .header__account-submenu {
        max-width: 450px;
    }
    
    .header__account-header {
        padding: 20px 30px;
    }
    
    .header__account-heading {
        font-size: 20px;
    }
    
    .header__account-close {
        font-size: 24px;
        width: 40px;
        height: 40px;
    }
}

/* Desktop (≥1024px) - Dropdown sotto il bottone */
@media (min-width: 1024px) {
    .header__account-submenu {
        position: absolute;
        top: calc(100% + 15px);
        right: 0;
        left: auto;
        height: auto;
        width: 340px;
        max-width: 340px;
        background-color: var(--bg-primary);
        padding: 0;
        border-radius: var(--radius);
        border: 1px solid var(--border-primary);
        box-shadow: var(--shadow);
        transform: none;
        border-left: none;
        transition: visibility 0s 0.3s, opacity 0.3s;
    }
    
    .header__account-submenu.design-isopen {
        transform: none;
        transition: visibility 0s, opacity 0.3s;
    }
    
    .header__account-arrow {
        display: block;
        width: 15px;
        height: 15px;
        position: absolute;
        top: -8px;
        right: 25px;
        background-color: var(--bg-primary);
        transform: rotate(45deg);
        border-top: 1px solid var(--border-primary);
        border-left: 1px solid var(--border-primary);
    }
    
    .header__account-header {
        display: none;
    }
    
    .header__account-not-logged {
        padding: 25px 30px;
    }
}
    </style>
</head>
<body>

<!-- HEADER -->
<header class="header" id="header">
    <div class="header__bar">
        <div class="header__bar-content container">
            <a class="header__bar-promo" href="tel:+3905119900957">
                <svg viewBox="0 0 24 24" fill="white" aria-hidden="true">
                    <path d="M6.62 10.79a15.05 15.05 0 006.58 6.58l2.2-2.2a1 1 0 011.06-.21c1.12.45 2.34.69 3.6.69a1 1 0 011 1v3.5a1 1 0 01-1 1C8.95 22 2 15.05 2 6.5a1 1 0 011-1h3.5a1 1 0 011 1c0 1.26.24 2.48.7 3.6a1 1 0 01-.21 1.06l-2.2 2.2z"/>
                </svg>
                <span>+39 05119900957</span>
            </a>

            <div class="header__bar-feedaty">★★★★★ 4.9/5 - 1000+ recensioni</div>
            <div class="header__bar-language">
                <span>Italiano</span>
            </div>
        </div>
    </div>
    
    <div class="header__top container">
        <div class="header__logo">
            <a href="https://shop.puntoluce.net/">
                 <img src="./img/logo.webp" alt="Punto Luce" width="440" height="192" fetchpriority="high" decoding="async">
            </a>
        </div>
        
        <div class="header__mobile-logo">
            <a href="https://shop.puntoluce.net/">
                <img src="./img/logo.webp" alt="Punto Luce" width="220" height="96" decoding="async">
            </a>
        </div>
        
        <div class="header__search">
            <form class="header__search-form" action="https://shop.puntoluce.net/search" method="post">
                <input type="text" name="keywords" class="header__search-box" placeholder="Cerca...">
                <button type="submit" class="header__search-button">
                    <span class="material-symbols-outlined">search</span>
                </button>
            </form>
        </div>
        
<div class="header__buttons">
    <!-- Menu Account con dropdown -->
    <div class="header__account">
        <button class="header__account-button" data-design-open="account">
            <span class="material-symbols-outlined">account_circle</span>
            <span>Account</span>
        </button>
        
        <div class="header__account-submenu" id="account">
            <span class="header__account-arrow"></span>
            <div class="header__account-content">
                <div class="header__account-header">
                    <div class="header__account-heading">Account</div>
                    <span class="header__account-close material-symbols-outlined" data-design-close="account">close</span>
                </div>
                
                <!-- Contenuto menu (not logged in) -->
                <div class="header__account-not-logged">
                    <div class="header__account-new-client">
                        <div class="header__account-new-client-text">Sei un nuovo cliente?</div>
                        <div class="header__account-sign-up">
                            <a href="https://shop.puntoluce.net/sign-up">Registrati, è veloce e facile</a>
                        </div>
                    </div>
                    <div class="header__account-log-in">
                        <div class="header__account-log-in-button">
                            <a href="https://shop.puntoluce.net/login">Login</a>
                        </div>
                        <div class="header__account-remember-password">
                            <a href="https://shop.puntoluce.net/remember-password">
                                <span>Password dimenticata?</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Carrello -->
    <button class="header__cart">
        <span class="material-symbols-outlined">shopping_cart</span>
        <span class="header__cart-quantity">0</span>
    </button>
    
    <!-- Menu hamburger mobile -->
    <button class="header__side-menu">
        <span class="material-symbols-outlined">menu</span>
    </button>
</div>

    </div>
    
    <nav class="header__navigation container">
        <ul class="header__navigation-left">
            <li class="header__navigation-item header__navigation-item--highlight">
                <button type="button">
                    Reparti
                    <span class="material-symbols-outlined">expand_more</span>
                </button>
                <div id="departments-menu">
                    <div class="departments-list">
                        <!-- Lista generata da JS -->
                    </div>
                    <div class="subdepartments-container">
                        <!-- Sottoreparti generati da JS -->
                    </div>
                </div>
            </li>
            <li class="header__navigation-item">
                <a href="https://shop.puntoluce.net/promotions">Promozioni</a>
            </li>
            <li class="header__navigation-item">
                <a href="https://shop.puntoluce.net/new-releases">Novità</a>
            </li>
        </ul>
        
        <ul class="header__navigation-right">
            <li class="header__navigation-item">
                <a href="https://www.puntoluce.net/comefare/">Blog</a>
            </li>
            <li class="header__navigation-item">
                <button type="button">
                    Negozio
                    <span class="material-symbols-outlined">expand_more</span>
                </button>
                <div class="header__navigation-submenu">
                    <div class="header__navigation-submenu-item">
                        <a href="https://shop.puntoluce.net/Domande-frequenti">FAQ</a>
                    </div>
                    <div class="header__navigation-submenu-item">
                        <a href="https://shop.puntoluce.net/Condizioni-di-vendita">Condizioni di Vendita</a>
                    </div>
                    <div class="header__navigation-submenu-item">
                        <a href="https://shop.puntoluce.net/Diritto-di-recesso">Diritto di Recesso</a>
                    </div>
                    <div class="header__navigation-submenu-item">
                        <a href="https://shop.puntoluce.net/Metodologie-di-spedizioni">Spedizioni</a>
                    </div>
                </div>
            </li>
        </ul>
    </nav>
</header>
<!-- Mobile Hamburger Menu -->
<div id="mobile-menu" class="mobile-menu" aria-hidden="true">
  <div class="mobile-menu__overlay" data-close></div>
  <aside class="mobile-menu__panel" role="dialog" aria-modal="true" aria-labelledby="mobileMenuTitle">
    <div class="mobile-menu__header">
      <h2 id="mobileMenuTitle">Menu</h2>
      <button class="mobile-menu__close" type="button" aria-label="Chiudi" data-close>
        <span class="material-symbols-outlined">close</span>
      </button>
    </div>

    <nav class="mobile-menu__content">
      <section class="mobile-menu__section">
        <h3 class="mobile-menu__section-title">Reparti</h3>
        <ul class="mobile-menu__list" id="mobile-departments-list"><!-- filled by JS --></ul>

        <button class="mobile-menu__more" id="mobile-departments-more" type="button">
          <span class="material-symbols-outlined">add</span>
          Mostra tutti i reparti
        </button>
      </section>

      <section class="mobile-menu__section">
        <ul class="mobile-menu__list">
          <li><a class="mobile-menu__link" href="https://shop.puntoluce.net/promotions">Promozioni</a></li>
          <li><a class="mobile-menu__link" href="https://shop.puntoluce.net/new-releases">Novità</a></li>
          <li><a class="mobile-menu__link" href="https://www.puntoluce.net/comefare/">Blog</a></li>
        </ul>
      </section>
    </nav>
  </aside>
</div>

<!-- CONTENUTO PRINCIPALE -->
<main>
    <div class="container">
        <h1>Contenuto della pagina</h1>
        <p style="margin-top: 20px;">Qui inserisci il contenuto...</p>
        <div style="height: 100vh;"></div>
    </div>
</main>

<!-- FOOTER -->
<footer class="footer" id="footer">
    <div class="container">
        <div class="footer__middle-section">
            <div class="footer__columns-container">
                
                <div class="footer__column">
                    <h3 class="footer__menu-title">Reparti</h3>
                    <div class="footer__column-content">
                        <ul class="footer__menu-list">
                            <li class="footer__menu-item"><a href="https://shop.puntoluce.net/Termoidraulica"><span>Termoidraulica</span></a></li>
                            <li class="footer__menu-item"><a href="https://shop.puntoluce.net/Climatizzatori"><span>Climatizzatori</span></a></li>
                            <li class="footer__menu-item"><a href="https://shop.puntoluce.net/Serie-civili-e-Placche"><span>Serie civili e Placche</span></a></li>
                            <li class="footer__menu-item"><a href="https://shop.puntoluce.net/Termostati-e-Cronotermostati"><span>Termostati e Cronotermostati</span></a></li>
                            <li class="footer__menu-item"><a href="https://shop.puntoluce.net/Citofonia-e-campanelli"><span>Citofonia e Campanelli</span></a></li>
                            <li class="footer__menu-item"><a href="https://shop.puntoluce.net/Automazione-industriale"><span>Automazione Industriale</span></a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="footer__column footer__column--info">
                    <h3 class="footer__menu-title">Informazioni</h3>
                    <div class="footer__column-content">
                        <ul class="footer__menu-list">
                        <li class="footer__menu-item">
                            <a href="https://shop.puntoluce.net/open2b/designing/designer90c78bc701338903a979/Punto-Luce-dove-il-buio-non-e'-mai-di-casa">
                            Chi siamo
                            </a>
                        </li>
                        <li class="footer__menu-item">
                            <a href="https://shop.puntoluce.net/open2b/designing/designer90c78bc701338903a979/Metodologie-di-spedizioni">
                            Spedizioni
                            </a>
                        </li>
                        <li class="footer__menu-item">
                            <a href="https://shop.puntoluce.net/open2b/designing/designer90c78bc701338903a979/Pagamenti">
                            Pagamenti
                            </a>
                        </li>
                        <li class="footer__menu-item">
                            <a href="https://shop.puntoluce.net/open2b/designing/designer90c78bc701338903a979/Agevolazioni-fiscali">
                            Agevolazioni fiscali
                            </a>
                        </li>
                        <li class="footer__menu-item">
                            <a href="https://shop.puntoluce.net/open2b/designing/designer90c78bc701338903a979/Domande-frequenti">
                            FAQ
                            </a>
                        </li>
                        <li class="footer__menu-item">
                            <a href="https://shop.puntoluce.net/open2b/designing/designer90c78bc701338903a979/Diritto-di-recesso">
                            Diritto di recesso
                            </a>
                        </li>
                        <li class="footer__menu-item">
                            <a href="https://shop.puntoluce.net/open2b/designing/designer90c78bc701338903a979/Condizioni-di-vendita">
                            Condizioni di Vendita
                            </a>
                        </li>
                        </ul>
                    </div>
                </div>

                
                <div class="footer__column">
                    <h3 class="footer__contact-title">Contatti</h3>
                    <div class="footer__column-content">
                        <div class="footer__contact-item">
                            <svg class="contact-icon" viewBox="0 0 24 24" fill="#037dd3">
                                <path d="M6.62 10.79a15.05 15.05 0 006.58 6.58l2.2-2.2a1 1 0 011.06-.21c1.12.45 2.34.69 3.6.69a1 1 0 011 1v3.5a1 1 0 01-1 1C8.95 22 2 15.05 2 6.5a1 1 0 011-1h3.5a1 1 0 011 1c0 1.26.24 2.48.7 3.6a1 1 0 01-.21 1.06l-2.2 2.2z"/>
                            </svg>
                            <a href="tel:+3905119900957">05119900957</a>
                        </div>
                        <div class="footer__contact-item">
                            <svg class="contact-icon" viewBox="0 0 24 24" fill="#037dd3">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12a2 2 0 01-2 2H4a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm0 4v10h16V8l-8 5-8-5z"/>
                            </svg>
                            <a href="/open2b/designing/designer90c78bc701338903a979/contact-us-modal" data-design-open-modal="720x640" title="Mandaci una mail">Mandaci una mail</a>

                        </div>
                        <div class="footer__contact-item">
                            <svg class="contact-icon" viewBox="0 0 24 24" fill="#037dd3">
                                <path d="M12 2a7 7 0 017 7c0 5.25-7 13-7 13S5 14.25 5 9a7 7 0 017-7zm0 9a2 2 0 100-4 2 2 0 000 4z"/>
                            </svg>
                            <a href="https://www.google.com/maps/place/Punto+Luce+-+Materiale+Elettrico+online/@44.3957045,11.2401242,17z/data=!3m1!4b1!4m6!3m5!1s0x477fd57c775bb475:0x5772f36268dc656c!8m2!3d44.3957008!4d11.2449951!16s%2Fg%2F11fc965p5_?entry=ttu&amp;g_ep=EgoyMDI1MDMwMy4wIKXMDSoASAFQAw%3D%3D" target="_blank" rel="noopener noreferrer">
                            Via Porrettana, 278, 40037 Sasso Marconi BO
                            </a>

                        </div>
                        
                        <div class="footer__social">
                            <div class="footer-social-link facebook">
                                <a href="https://www.facebook.com/PuntoLuce?locale=it_IT" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
                                <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><title>Facebook</title>
                                    <path d="M30.109 0H1.759C.787 0 0 .787 0 1.759v28.35c0 .971.787 1.759 1.759 1.759h15.263V19.527h-4.153v-4.81h4.153v-3.546c0-4.117 2.514-6.358 6.185-6.358 1.76 0 3.271.131 3.712.19v4.301l-2.547.001c-1.997 0-2.384.95-2.384 2.342v3.07h4.763l-.62 4.81h-4.143v12.34h8.121c.971 0 1.759-.787 1.759-1.758V1.76C31.868.787 31.08 0 30.109 0"/>
                                </svg>
                                </a>
                            </div>

                            <div class="footer-social-link">
                                <a href="https://it.linkedin.com/company/punto-luce-web-e" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
                                <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><title>LinkedIn</title>
                                    <path d="M29.63 0H2.368C1.057 0 0 1.058 0 2.368v27.263C0 30.942 1.057 32 2.368 32H29.63C30.942 32 32 30.942 32 29.63V2.368C32 1.058 30.942 0 29.63 0zM9.446 27.17H4.74V12.27h4.706v14.898zM7.093 10.35c-1.5 0-2.715-1.215-2.715-2.715 0-1.5 1.215-2.714 2.715-2.714 1.5 0 2.715 1.214 2.715 2.714 0 1.5-1.215 2.715-2.715 2.715zm18.627 16.818h-4.706v-7.236c0-1.726-.035-3.945-2.4-3.945-2.407 0-2.777 1.876-2.777 3.815v7.366h-4.707V12.27h4.513v2.038h.065c.63-1.192 2.172-2.45 4.47-2.45 4.784 0 5.668 3.149 5.668 7.246v8.066z"/>
                                </svg>
                                </a>
                            </div>

                            <div class="footer-social-link instagram">
                                <a href="https://www.instagram.com/puntoluce.net_/" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
                                <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><title>Instagram</title>
                                    <g fill-rule="evenodd">
                                    <path d="M16 2.887c4.27 0 4.777.016 6.463.093 1.56.071 2.407.332 2.97.551.747.29 1.28.637 1.84 1.196.56.56.906 1.093 1.196 1.84.219.563.48 1.41.55 2.97.078 1.686.094 2.192.094 6.463 0 4.27-.016 4.777-.093 6.463-.071 1.56-.332 2.407-.551 2.97a4.955 4.955 0 0 1-1.196 1.84c-.56.56-1.093.906-1.84 1.196-.563.219-1.41.48-2.97.55-1.686.078-2.192.094-6.463.094s-4.777-.016-6.463-.093c-1.56-.071-2.407-.332-2.97-.551a4.955 4.955 0 0 1-1.84-1.196 4.955 4.955 0 0 1-1.196-1.84c-.219-.563-.48-1.41-.55-2.97-.078-1.686-.094-2.192-.094-6.595 0-4.344.018-4.889.096-6.595.078-1.702.348-2.865.744-3.882A7.84 7.84 0 0 0 2.69 2.69 7.84 7.84 0 0 0 .845 5.523C.449 6.54.179 7.703.1 9.405.023 11.111.005 11.656.005 16c0 4.344.018 4.889.096 6.595.078 1.702.348 2.865.744 3.882A7.84 7.84 0 0 0 2.69 29.31a7.84 7.84 0 0 0 2.833 1.845c1.017.396 2.18.666 3.882.744 1.706.078 2.251.096 6.595.096 4.344 0 4.889-.018 6.595-.096 1.702-.078 2.865-.348 3.882-.744a7.84 7.84 0 0 0 2.833-1.845 7.84 7.84 0 0 0 1.845-2.833c.396-1.017.666-2.18.744-3.882.078-1.706.096-2.251.096-6.595 0-4.344-.018-4.889-.096-6.595-.078-1.702-.348-2.865-.744-3.882A7.84 7.84 0 0 0 29.31 2.69 7.84 7.84 0 0 0 26.477.845C25.46.449 24.297.179 22.595.1 20.889.023 20.344.005 16 .005"></path>
                                    <path d="M16 7.786a8.214 8.214 0 1 0 0 16.428 8.214 8.214 0 0 0 0-16.428zm0 13.546a5.332 5.332 0 1 1 0-10.664 5.332 5.332 0 0 1 0 10.664zM26.458 7.462a1.92 1.92 0 1 1-3.84 0 1.92 1.92 0 0 1 3.84 0"></path>
                                    </g>
                                </svg>
                                </a>
                            </div>

                            <div class="footer-social-link">
                                <a href="https://www.youtube.com/channel/UC4lVgQBJMFakRlveAJJh-Ew" target="_blank" rel="noopener noreferrer" aria-label="YouTube">
                                <svg fill="#FFFFFF" width="32" height="32" viewBox="0 0 504 504" xmlns="http://www.w3.org/2000/svg"><title>YouTube</title>
                                    <g><polygon points="219.6,202.4 219.6,294.4 304.4,248.8"></polygon></g>
                                    <g><path d="M377.6,0H126C56.8,0,0,56.8,0,126.4V378c0,69.2,56.8,126,126,126h251.6c69.6,0,126.4-56.8,126.4-126.4V126.4 C504,56.8,447.2,0,377.6,0z M408,264.4c0,26.4-2.4,53.2-2.4,53.2s-2.8,22.4-12,32.4c-12,13.2-25.2,13.2-31.2,14 c-44,3.2-110,3.6-110,3.6s-82-1.2-107.2-3.6c-6.8-1.2-22.8-0.8-34.8-14c-9.6-10-12-32.4-12-32.4S96,290.8,96,264.4v-24.8 c0-26.4,2.4-53.2,2.4-53.2s2.8-22.4,12-32.4c12-13.2,25.2-13.6,31.2-14.4C186,136.4,252,136,252,136s66,0.4,110,3.6 c6,0.8,19.6,1.2,31.6,14c9.6,10,12,32.8,12,32.8s2.4,26.8,2.4,53.2V264.4z"/></g>
                                </svg>
                                </a>
                            </div>

                            <div class="footer-social-link">
                                <a href="https://www.tiktok.com/@puntoluce.net" target="_blank" rel="noopener noreferrer" aria-label="TikTok">
                                <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><title>TikTok</title>
                                    <path d="M16.708 0.027c1.745-0.027 3.48-0.011 5.213-0.027 0.105 2.041 0.839 4.12 2.333 5.563 1.491 1.479 3.6 2.156 5.652 2.385v5.369c-1.923-0.063-3.855-0.463-5.6-1.291-0.76-0.344-1.468-0.787-2.161-1.24-0.009 3.896 0.016 7.787-0.025 11.667-0.104 1.864-0.719 3.719-1.803 5.255-1.744 2.557-4.771 4.224-7.88 4.276-1.907 0.109-3.812-0.411-5.437-1.369-2.693-1.588-4.588-4.495-4.864-7.615-0.032-0.667-0.043-1.333-0.016-1.984 0.24-2.537 1.495-4.964 3.443-6.615 2.208-1.923 5.301-2.839 8.197-2.297 0.027 1.975-0.052 3.948-0.052 5.923-1.323-0.428-2.869-0.308-4.025 0.495-0.844 0.547-1.485 1.385-1.819 2.333-0.276 0.676-0.197 1.427-0.181 2.145 0.317 2.188 2.421 4.027 4.667 3.828 1.489-0.016 2.916-0.88 3.692-2.145 0.251-0.443 0.532-0.896 0.547-1.417 0.131-2.385 0.079-4.76 0.095-7.145 0.011-5.375-0.016-10.735 0.025-16.093z"></path>
                                </svg>
                                </a>
                            </div>
                            </div>

                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer__bottom-bar">
            <div class="footer__bottom-content">
                <div class="footer__aicel">
                <img src="./img/aicel.webp" alt="AICEL - Associazione Italiana Commercio Elettronico" loading="lazy" decoding="async">
                </div>
                
                <div class="footer__legal">
                    <p>Punto Luce è un sito di WEB-E Srl | Via Porrettana, 278 - 40037 Sasso Marconi (BO)<br>
                    P.IVA 04108481203 | Copyright © 2024 - TUTTI I DIRITTI RISERVATI</p>
                </div>
                
                <div class="footer__payments">
                    <div class="footer__payment-logos">
                        <img src="./img/pagamento1.webp" alt="Metodo di pagamento 1" loading="lazy" decoding="async">
                        <img src="./img/pagamento2.webp" alt="Metodo di pagamento 2" loading="lazy" decoding="async">
                        <img src="./img/pagamento3.webp" alt="Metodo di pagamento 3" loading="lazy" decoding="async">
                        <img src="./img/pagamento4.webp" alt="Metodo di pagamento 4" loading="lazy" decoding="async">
                        <img src="./img/pagamento5.webp" alt="Metodo di pagamento 5" loading="lazy" decoding="async">
                        <img src="./img/pagamento6.webp" alt="Metodo di pagamento 6" loading="lazy" decoding="async">
                        <img src="./img/pagamento7.webp" alt="Metodo di pagamento 7" loading="lazy" decoding="async">
                        <img src="./img/pagamento8.webp" alt="Metodo di pagamento 8" loading="lazy" decoding="async">
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>

<script>
// Footer accordion per mobile
(function() {
    var footer = document.getElementById('footer');
    if (!footer) return;
    
    var MOBILE_BP = 1024;
    
    function isMobile() { 
        return window.innerWidth <= MOBILE_BP; 
    }
    
    function initAccordion() {
        var contents = footer.querySelectorAll('.footer__column-content');
        
        if (isMobile()) {
            contents.forEach(function(content) {
                content.style.display = 'none';
            });
        } else {
            contents.forEach(function(content) {
                content.style.display = 'block';
            });
        }
    }
    
    footer.addEventListener('click', function(e) {
        if (!isMobile()) return;
        
        var title = e.target.closest('.footer__menu-title, .footer__contact-title');
        if (!title) return;
        
        e.preventDefault();
        
        var content = title.nextElementSibling;
        if (!content || !content.classList.contains('footer__column-content')) return;
        
        var isOpen = content.style.display === 'block';
        
        // Chiudi tutti
        footer.querySelectorAll('.footer__column-content').forEach(function(c) {
            c.style.display = 'none';
        });
        footer.querySelectorAll('.footer__menu-title, .footer__contact-title').forEach(function(t) {
            t.classList.remove('active');
        });
        
        // Apri/chiudi quello cliccato
        if (!isOpen) {
            content.style.display = 'block';
            title.classList.add('active');
        }
    });
    
    window.addEventListener('resize', function() {
        setTimeout(initAccordion, 200);
    });
    
    initAccordion();
})();

// Menu Reparti Desktop - CARICA DA departments.json
(function () {
  if (window.innerWidth < 1024) return;

  var deptsList = document.querySelector(".departments-list");
  var subsContainer = document.querySelector(".subdepartments-container");
  if (!deptsList || !subsContainer) return;

  // ------ Utils ------
  function normalizeData(json) {
    // accetta sia [{...}] che { departments: [{...}] }
    return Array.isArray(json) ? json : (json && Array.isArray(json.departments) ? json.departments : []);
  }

  function renderDepartments(departments) {
    if (!departments || departments.length === 0) return;

    // Svuota contenitori (in caso di re-render)
    deptsList.innerHTML = "";
    subsContainer.innerHTML = "";

    departments.forEach(function (dept, index) {
      // Reparto (colonna sinistra)
      var deptDiv = document.createElement("div");
      deptDiv.className = "department-item";
      deptDiv.textContent = dept.name;
      deptDiv.dataset.index = index;
      if (index === 0) deptDiv.classList.add("active");
      deptsList.appendChild(deptDiv);

      // Sottoreparti (colonna destra)
      var subsDiv = document.createElement("div");
      subsDiv.className = "subdepartments-list";
      subsDiv.dataset.index = index;
      if (index === 0) subsDiv.classList.add("active");

      if (dept.subdepartments && dept.subdepartments.length > 0) {
        dept.subdepartments.forEach(function (sub) {
          var subDiv = document.createElement("div");
          subDiv.className = "subdepartment-item";
          var link = document.createElement("a");
          link.href = sub.url;
          link.textContent = sub.name;
          subDiv.appendChild(link);
          subsDiv.appendChild(subDiv);
        });
      } else {
        var emptyDiv = document.createElement("div");
        emptyDiv.style.padding = "20px";
        emptyDiv.style.color = "#999";
        emptyDiv.textContent = "Nessuna sottocategoria";
        subsDiv.appendChild(emptyDiv);
      }

      subsContainer.appendChild(subsDiv);
    });

    // Hover interaction
    deptsList.addEventListener("mouseover", function (e) {
      var item = e.target.closest(".department-item");
      if (!item) return;

      deptsList.querySelectorAll(".department-item").forEach(function (d) {
        d.classList.remove("active");
      });
      subsContainer.querySelectorAll(".subdepartments-list").forEach(function (s) {
        s.classList.remove("active");
      });

      item.classList.add("active");
      var index = item.dataset.index;
      var targetSubs = subsContainer.querySelector('.subdepartments-list[data-index="' + index + '"]');
      if (targetSubs) targetSubs.classList.add("active");
    });
  }

  // ------ Fonte dati con fallback ------
  async function loadDepartments() {
    // 1) Tenta JSON esterno
    try {
      const res = await fetch("./departments.json?v=" + Date.now(), { cache: "no-store" });
      if (!res.ok) throw new Error("HTTP " + res.status);
      const json = await res.json();
      const data = normalizeData(json);
      if (data.length) return data;
    } catch (err) {
      console.warn("[departments] fetch fallito:", err);
    }

    // 2) Fallback: prova a leggere dal DOM (header Open2b)
    var alt = [];
    var menuDepts = document.querySelectorAll(".header__navigation-department");
    if (menuDepts.length > 0) {
      menuDepts.forEach(function (dept) {
        var id = dept.getAttribute("data-department-id");
        var name = dept.querySelector(".header__navigation-submenu-list-title")?.textContent.trim();
        var subContainer = document.querySelector(
          '.header__navigation-subcategory-container[data-department-id="' + id + '"]'
        );
        var subdepartments = [];
        if (subContainer) {
          subContainer.querySelectorAll(".header__navigation-submenu-item a").forEach(function (link) {
            subdepartments.push({ name: link.textContent.trim(), url: link.href });
          });
        }
        alt.push({ id: id, name: name, subdepartments: subdepartments });
      });
    }
    return alt;
  }

  // ------ Init ------
  (async function init() {
    const departments = await loadDepartments();
    if (!departments || departments.length === 0) {
      console.warn("[departments] Nessun reparto disponibile.");
      return;
    }
    renderDepartments(departments);
  })();
})();

</script>
<script>
// Hamburger menu mobile: reparti (short list + mostra tutti) + promozioni/novità
(function () {
  var SIDE_BTN = document.querySelector('.header__side-menu');
  var MENU = document.getElementById('mobile-menu');
  if (!SIDE_BTN || !MENU) return;

  var PANEL = MENU.querySelector('.mobile-menu__panel');
  var OVERLAY = MENU.querySelector('[data-close]');
  var CLOSES = MENU.querySelectorAll('[data-close]');
  var LIST = document.getElementById('mobile-departments-list');
  var MORE = document.getElementById('mobile-departments-more');

  var SHORT_COUNT = 8; // quanti reparti mostrare in anteprima
  var fullOpen = false; // stato "mostra tutti"
  var departmentsCache = null;

  function openMenu() {
    MENU.classList.add('is-open');
    MENU.setAttribute('aria-hidden','false');
    document.body.classList.add('no-scroll');
    // focus iniziale
    setTimeout(() => PANEL.querySelector('.mobile-menu__close')?.focus(), 0);
    // ESC to close
    document.addEventListener('keydown', onKeyDown);
  }
  function closeMenu() {
    MENU.classList.remove('is-open');
    MENU.setAttribute('aria-hidden','true');
    document.body.classList.remove('no-scroll');
    document.removeEventListener('keydown', onKeyDown);
    SIDE_BTN.focus();
  }
  function onKeyDown(e) {
    if (e.key === 'Escape') closeMenu();
  }

  SIDE_BTN.addEventListener('click', openMenu);
  OVERLAY?.addEventListener('click', closeMenu);
  CLOSES.forEach(btn => btn.addEventListener('click', closeMenu));

  // Data loader (stessa logica del desktop, ma sempre attivo su mobile)
  async function loadDepartments() {
    if (departmentsCache) return departmentsCache;
    const candidates = ['departments.json', './departments.json', '/departments.json'];
    for (const p of candidates) {
      try {
        const url = new URL(p, document.baseURI);
        url.searchParams.set('v', Date.now());
        const res = await fetch(url, { cache: 'no-store' });
        if (!res.ok) continue;
        const json = await res.json();
        const arr = Array.isArray(json) ? json : (Array.isArray(json?.departments) ? json.departments : []);
        if (arr.length) { departmentsCache = arr; return arr; }
      } catch (_) {}
    }
    // Fallback DOM (Open2b), se presente
    const alt = [];
    document.querySelectorAll(".header__navigation-department").forEach(dept => {
      const id = dept.getAttribute("data-department-id");
      const name = dept.querySelector(".header__navigation-submenu-list-title")?.textContent.trim();
      const sub = document.querySelector(`.header__navigation-subcategory-container[data-department-id="${id}"]`);
      const subs = [];
      sub?.querySelectorAll(".header__navigation-submenu-item a").forEach(a => subs.push({ name: a.textContent.trim(), url: a.href }));
      alt.push({ id, name, subdepartments: subs });
    });
    departmentsCache = alt;
    return alt;
  }

  // Render list (short/full) + collapsible sublists
  function renderDepartments(departments) {
    LIST.innerHTML = '';
    const slice = fullOpen ? departments : departments.slice(0, SHORT_COUNT);

    slice.forEach((dept, idx) => {
      const li = document.createElement('li');
      li.className = 'mobile-menu__item';

      const btn = document.createElement('button');
      btn.type = 'button';
      btn.className = 'mobile-menu__button';
      btn.setAttribute('aria-expanded', 'false');
      btn.innerHTML = `<span>${dept.name}</span><span class="material-symbols-outlined mobile-menu__chevron">chevron_right</span>`;

      const sub = document.createElement('ul');
      sub.className = 'mobile-sublist';
      if (dept.subdepartments?.length) {
        dept.subdepartments.forEach(sd => {
          const sli = document.createElement('li');
          sli.className = 'mobile-subitem';
          const a = document.createElement('a');
          a.href = sd.url;
          a.textContent = sd.name;
          sli.appendChild(a);
          sub.appendChild(sli);
        });
      } else {
        const empty = document.createElement('li');
        empty.className = 'mobile-subitem';
        empty.innerHTML = `<span style="display:block;padding:8px 12px;color:#777">Nessuna sottocategoria</span>`;
        sub.appendChild(empty);
      }

      // toggle sublist
      btn.addEventListener('click', function () {
        const open = sub.classList.toggle('is-open');
        btn.setAttribute('aria-expanded', open ? 'true' : 'false');
        btn.querySelector('.mobile-menu__chevron').textContent = open ? 'expand_more' : 'chevron_right';
      });

      li.appendChild(btn);
      li.appendChild(sub);
      LIST.appendChild(li);
    });

    // bottone "Mostra tutti / Mostra meno"
    if (!fullOpen && departments.length > SHORT_COUNT) {
      MORE.style.display = 'flex';
      MORE.querySelector('.material-symbols-outlined').textContent = 'add';
      MORE.lastChild.nodeType === 3 ? (MORE.lastChild.textContent = ' Mostra tutti i reparti') : null;
    } else if (fullOpen && departments.length > SHORT_COUNT) {
      MORE.style.display = 'flex';
      MORE.querySelector('.material-symbols-outlined').textContent = 'remove';
      MORE.lastChild.nodeType === 3 ? (MORE.lastChild.textContent = ' Mostra meno reparti') : null;
    } else {
      MORE.style.display = 'none';
    }
  }

  MORE.addEventListener('click', function () {
    fullOpen = !fullOpen;
    if (departmentsCache) renderDepartments(departmentsCache);
  });

  // init on first open
  let hydrated = false;
  SIDE_BTN.addEventListener('click', async function hydrateOnce() {
    if (hydrated) return;
    const depts = await loadDepartments();
    renderDepartments(depts);
    hydrated = true;
  }, { once: true });
})();
</script>
<script>
// Sistema di apertura/chiusura menu Account
(function() {
    'use strict';
    
    // Apri menu con data-design-open
    document.addEventListener('click', function(e) {
        var opener = e.target.closest('[data-design-open]');
        if (!opener) return;
        
        e.preventDefault();
        e.stopPropagation();
        
        var targetId = opener.getAttribute('data-design-open');
        var target = document.getElementById(targetId);
        
        if (target && !target.classList.contains('design-isopen')) {
            target.classList.add('design-isopen');
            if (window.innerWidth < 1024) {
                document.body.classList.add('no-scroll');
            }
        }
    });
    
    // Chiudi menu con data-design-close
    document.addEventListener('click', function(e) {
        var closer = e.target.closest('[data-design-close]');
        if (!closer) return;
        
        e.preventDefault();
        e.stopPropagation();
        
        var targetId = closer.getAttribute('data-design-close');
        var target = document.getElementById(targetId);
        
        if (target) {
            target.classList.remove('design-isopen');
            document.body.classList.remove('no-scroll');
        }
    });
    
    // Chiudi cliccando fuori (solo desktop ≥1024px)
    document.addEventListener('click', function(e) {
        if (window.innerWidth < 1024) return;
        
        var accountMenu = document.getElementById('account');
        var accountButton = document.querySelector('[data-design-open="account"]');
        
        if (accountMenu && accountMenu.classList.contains('design-isopen')) {
            if (!accountMenu.contains(e.target) && 
                (!accountButton || !accountButton.contains(e.target))) {
                accountMenu.classList.remove('design-isopen');
            }
        }
    });
    
    // ESC per chiudere
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            var accountMenu = document.getElementById('account');
            if (accountMenu && accountMenu.classList.contains('design-isopen')) {
                accountMenu.classList.remove('design-isopen');
                document.body.classList.remove('no-scroll');
            }
        }
    });
})();
</script>
</body>
</html>